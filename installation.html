<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 
  <!-- Styles & Scripts -->
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/html5-qrcode" defer></script>
  <script src="script.js" defer></script>
</head>
<body>
  <div class="container">
    <main>
      <form id="mainForm" method="POST">
        <!-- ğŸ§¬ Centered Logo + Title Inside Form -->
        <div style="text-align: center; margin-bottom: 20px;">
          <img src="mini.png" class="top-logo" alt="ISTOS Medical Logo" />
          <h3 style="margin-top: 0; margin-bottom: 20px; color: #3b5998;">âš™ï¸ HISTOPATH</h3>
          <div id="spinner" style="display: none; margin-top: 10px;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif" alt="Loading..." width="30" />
          </div>
        </div>

        <div id="formOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.6); z-index:999;"></div>

        <!-- ğŸ“ Left-aligned Form Fields -->
        <div class="form-group">
          <label for="installationDate">ğŸ“… Installation Date:</label>
          <input type="date" id="installationDate" name="installationDate" required class="half-width" />
        </div>
                
        <div class="form-group">
          <label for="customerName">ğŸ‘¤ Customer Name:</label>
          <input type="text" id="customerName" name="customerName" required class="three-quarter" />
        </div>

        <div class="form-group">
          <label for="address">ğŸ“ Address:</label>
          <input type="text" id="address" name="address" required class="full-width" />
        </div>

        <div class="form-group">
          <label for="salesPerson">ğŸ‘· Sales / Service Person</label>
          <select id="salesPerson" name="engineer" required>
            <option value="">Select Sales / Service Person</option>
            <option value="mayuresh">ğŸ‘” Mayuresh Shrikanth Kadam</option>
            <option value="naushad">ğŸ‘” Naushad</option>
            <option value="nitin">ğŸ‘” Nitin Yadav</option>
            <option value="praveen">ğŸ‘” Praveen Kumar</option>
            <option value="sarfaraz">ğŸ‘” Sarfaraz Khan</option>
            <option value="mazhar">ğŸ‘” Mazhar M</option>
          </select>
        </div>

        <!-- ğŸ”¸ Subtle Divider -->
        <hr style="border: none; border-top: 4px dashed #ccc; margin: 40px 0;" />

        <!-- ğŸ› ï¸ Equipment Section -->
        <section id="machineSection">
          <h3>ğŸ› ï¸ Record New Equipment</h3>
          <div id="machineContainer"></div>

          <div style="text-align: left; margin-top: 10px;">
            <button type="button" id="addMachineBtn" class="istos-btn add-machine-btn" style="background-color: #4CAF50; color: white;">â• Add Equipment</button>
          </div>
        </section>

        <!-- âœ… Submit Button -->
        <div style="text-align: center; margin-top: 30px;">
          <button id="submitBtn" type="submit">âœ… Submit Record</button>
        </div>
      </form>

      <!-- ğŸ”” Toast Feedback -->
      <div id="toast" style="display:none; background:#e0f7fa; color:#00796b; padding:8px; border-radius:6px; margin-top:10px; text-align:center;">
        Record submitted!
      </div>

      <!-- âš ï¸ QR Scan Error Message -->
      <div id="error-message" style="display:none; background:#ffe0e0; color:#b00020; padding:8px; border-radius:6px; margin-top:10px; text-align:center;">
        <!-- Error message will appear here -->
      </div>

      <script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js")
      .then(() => console.log("âœ… Service Worker registered"))
      .catch(err => console.error("âŒ SW registration failed:", err));
  }
</script>

    </main>
  </div>
</body>
</html>
